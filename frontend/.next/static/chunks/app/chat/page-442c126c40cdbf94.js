(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{683:(e,t,r)=>{Promise.resolve().then(r.bind(r,8080))},8080:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var a=r(5155),s=r(2115),i=r(81),o=r(760);r(6874);var n=r(4614),l=r(9465);async function c(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(console.log("Generating welcome message for:",{users:e,isMainChat:t}),e&&(e.name||e.displayName)){let r=e.name||e.displayName||"Valued User";return(console.log("Using existing user name:",r),t)?"Welcome back, ".concat(r,"! \uD83C\uDF89\n\nI'm Supe AI, your intelligent assistant powered by cutting-edge artificial intelligence. I'm here to help you with anything you need - from answering questions and solving problems to creative tasks and productivity support.\n\n\uD83D\uDE80 Ready to boost your productivity and unlock new possibilities? Let's get started!\n\nWhat would you like to work on today?"):"Hello ".concat(r,"! \uD83D\uDC4B\n\nI'm Supe AI's assistant, here to help you with our cutting-edge AI services. Whether you need information about our solutions, technical support, or want to explore how AI can transform your business, I'm here to assist you.\n\n\uD83D\uDE80 How can I help you today?")}if(e&&!e.name&&!e.displayName){console.log("User logged in but name missing, fetching user data...");try{let e=await fetch("/api/auth/session",{credentials:"include"}),r=await e.json();if(r.user&&(r.user.name||r.user.displayName)){let e=r.user.name||r.user.displayName||"Valued User";if(console.log("Retrieved user name:",e),t)return"Welcome back, ".concat(e,"! \uD83C\uDF89\n\nI'm Supe AI, your intelligent assistant powered by cutting-edge artificial intelligence. I'm here to help you with anything you need - from answering questions and solving problems to creative tasks and productivity support.\n\n\uD83D\uDE80 Ready to boost your productivity and unlock new possibilities? Let's get started!\n\nWhat would you like to work on today?");return"Hello ".concat(e,"! \uD83D\uDC4B\n\nI'm Supe AI's assistant, here to help you with our cutting-edge AI services. Whether you need information about our solutions, technical support, or want to explore how AI can transform your business, I'm here to assist you.\n\n\uD83D\uDE80 How can I help you today?")}}catch(e){console.error("Error fetching user data:",e)}}return t?"Hello! I'm Supe AI, your intelligent assistant. How can I help you today?":"Hello! I'm Supe AI's assistant. How can I help you with our services today?"}var d=r(5695);let u=r(9509).env.NEXT_PUBLIC_BACKEND_URL||"https://backend-0dlk.onrender.com";function h(){let{user:e,loading:t,logout:r}=(0,l.A)(),[h,m]=(0,s.useState)([]),[p,g]=(0,s.useState)(""),[w,f]=(0,s.useState)(!1),[y,x]=(0,s.useState)(!1),b=(0,s.useRef)(null),v=(0,s.useRef)(null),[j,k]=(0,s.useState)(!1),N=(0,d.useRouter)();(0,s.useEffect)(()=>{t||c(e,!0).then(e=>{m([{role:"assistant",content:e,timestamp:new Date}])})},[e,t]);let I=()=>{var e;null==(e=b.current)||e.scrollIntoView({behavior:"smooth"})};(0,s.useEffect)(()=>{I()},[h]),(0,s.useEffect)(()=>{var e;null==(e=v.current)||e.focus()},[]),(0,s.useEffect)(()=>{let e=e=>k(e.detail);return window.addEventListener("sidebar-toggle",e),()=>window.removeEventListener("sidebar-toggle",e)},[]),(0,s.useEffect)(()=>{window.__supeai_user_logged_in=!!e},[e]),(0,s.useEffect)(()=>{let e=e=>{e.detail&&e.detail.href};return window.addEventListener("supeai-logout-modal",e),()=>window.removeEventListener("supeai-logout-modal",e)},[]),(0,s.useEffect)(()=>{if(!e)return;let t=e=>{"/chat"!==window.location.pathname&&window.history.pushState(null,"","/chat")};return window.addEventListener("popstate",t),()=>window.removeEventListener("popstate",t)},[e]);let A=async()=>{if(!p.trim()||w)return;let e=p.trim();g(""),f(!0),x(!0);let t={role:"user",content:e,timestamp:new Date};m(e=>[...e,t]);try{let t=await fetch("".concat(u,"/api/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})});if(!t.ok)throw Error("Failed to get response");let r=await t.json();setTimeout(()=>{let e={role:"assistant",content:r.reply,timestamp:new Date};m(t=>[...t,e]),f(!1),x(!1)},1e3)}catch(t){console.error("Error sending message:",t);let e={role:"assistant",content:"Sorry, I encountered an error. Please try again.",timestamp:new Date};m(t=>[...t,e]),f(!1),x(!1)}},E=e=>{let t=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0");return"".concat(t,":").concat(r)};return((0,s.useEffect)(()=>{t||e||N.replace("/auth/login")},[e,t,N]),t||!e)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.A,{}),(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-[#051A05] via-[#0A2A0A] to-[#051A05] flex items-center justify-center",children:(0,a.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-white text-xl",children:"Loading..."})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.A,{}),(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-[#051A05] via-[#0A2A0A] to-[#051A05] transition-all duration-300 ".concat(j?"ml-56":""),children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-6 py-8",children:(0,a.jsxs)("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl border border-white/10 shadow-2xl min-h-[600px] flex flex-col",children:[(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[(0,a.jsx)(o.N,{children:h.map((e,t)=>(0,a.jsx)(i.P.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.4,ease:"easeOut"},className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,a.jsx)("div",{className:"max-w-[80%] ".concat("user"===e.role?"order-2":"order-1"),children:(0,a.jsxs)("div",{className:"flex items-start space-x-3 ".concat("user"===e.role?"flex-row-reverse space-x-reverse":""),children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ".concat("user"===e.role?"bg-gradient-to-r from-[#00FFC2] to-[#00FFC2]/80":"bg-gradient-to-r from-purple-500 to-blue-500"),children:"user"===e.role?(0,a.jsx)("svg",{className:"w-4 h-4 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}):(0,a.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,a.jsxs)("div",{className:"flex-1 ".concat("user"===e.role?"text-right":"text-left"),children:[(0,a.jsx)("div",{className:"inline-block p-4 rounded-2xl ".concat("user"===e.role?"bg-gradient-to-r from-[#00FFC2] to-[#00FFC2]/90 text-black shadow-lg":"bg-white/10 text-white backdrop-blur-sm border border-white/10"),children:(0,a.jsx)("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:e.content})}),(0,a.jsx)("div",{className:"text-xs text-gray-400 mt-2 ".concat("user"===e.role?"text-right":"text-left"),children:E(e.timestamp)})]})]})})},t))}),y&&(0,a.jsx)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-start",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-purple-500 to-blue-500 flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,a.jsx)("div",{className:"bg-white/10 text-white p-4 rounded-2xl backdrop-blur-sm border border-white/10",children:(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)(i.P.div,{className:"w-2 h-2 bg-white rounded-full",animate:{y:[0,-8,0]},transition:{duration:.6,repeat:1/0,ease:"easeInOut"}}),(0,a.jsx)(i.P.div,{className:"w-2 h-2 bg-white rounded-full",animate:{y:[0,-8,0]},transition:{duration:.6,repeat:1/0,ease:"easeInOut",delay:.1}}),(0,a.jsx)(i.P.div,{className:"w-2 h-2 bg-white rounded-full",animate:{y:[0,-8,0]},transition:{duration:.6,repeat:1/0,ease:"easeInOut",delay:.2}})]})})]})}),(0,a.jsx)("div",{ref:b})]}),(0,a.jsxs)("div",{className:"border-t border-white/10 p-6",children:[(0,a.jsxs)("div",{className:"flex items-end space-x-4",children:[(0,a.jsx)(i.P.div,{className:"flex-1 relative",whileFocus:{scale:1.02},children:(0,a.jsx)("textarea",{ref:v,value:p,onChange:e=>g(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),A())},placeholder:e?"Message Supe AI, ".concat(e.name||e.displayName||"User","..."):"Message Supe AI...",disabled:w,rows:1,className:"w-full p-4 bg-white/10 text-white rounded-2xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#00FFC2]/50 focus:bg-white/15 transition-all duration-300 disabled:opacity-50 backdrop-blur-sm border border-white/10 resize-none",style:{minHeight:"60px",maxHeight:"200px"}})}),(0,a.jsx)(i.P.button,{onClick:A,disabled:!p.trim()||w,whileHover:{scale:1.05,boxShadow:"0 8px 25px rgba(0, 255, 194, 0.4)"},whileTap:{scale:.95},className:"bg-gradient-to-r from-[#00FFC2] to-[#00FFC2]/90 text-black p-4 rounded-2xl hover:from-[#00FFC2]/90 hover:to-[#00FFC2] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:(0,a.jsx)(i.P.svg,{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",whileHover:{rotate:15},transition:{duration:.2},children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]}),(0,a.jsx)("div",{className:"text-xs text-gray-400 mt-3 text-center",children:"Press Enter to send, Shift+Enter for new line"})]})]})})})]})}},9465:(e,t,r)=>{"use strict";let a,s,i;r.d(t,{A:()=>m,AuthProvider:()=>h});var o=r(5155),n=r(2115),l=r(3915),c=r(6203),d=r(9509);try{a=(0,l.Wp)({apiKey:"AIzaSyA40wiXOqkqSCpHrzhgjdKuO056G1yjIv0",authDomain:"supeai-6da3b.firebaseapp.com",databaseURL:"https://supeai-6da3b-default-rtdb.firebaseio.com",projectId:"supeai-6da3b",storageBucket:"supeai-6da3b.appspot.com",messagingSenderId:"114747954289",appId:"1:114747954289:web:e7d2f5d6f2c5c5c5c5c5c5"}),s=(0,c.xI)(a),i=new c.HF}catch(e){console.error("Firebase initialization error (non-critical):",e.message)}let u=(0,n.createContext)({});function h(e){let{children:t}=e,[r,a]=(0,n.useState)(null),[l,h]=(0,n.useState)(!0);(0,n.useEffect)(()=>{if(!s){console.warn("Auth not initialized, but continuing..."),h(!1);return}m();let e=s.onAuthStateChanged(e=>{e?a({...e,emailVerified:e.emailVerified}):a(null),h(!1)});return()=>e()},[]);let m=async()=>{try{let e=await fetch("/api/auth/session",{credentials:"include"}),t=await e.json();t.user?a(t.user):a(null)}catch(e){console.error("Session check error:",e),a(null)}h(!1)},p=async e=>{let t=null;try{t=await (0,c.eJ)(s,e.email,e.password),await (0,c.gA)(t.user);let r=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,firebaseUid:t.user.uid})});if(!r.ok){let e=await r.json();if(t&&t.user)try{await t.user.delete(),console.log("Firebase user deleted due to backend signup failure")}catch(e){console.error("Failed to delete Firebase user:",e)}throw Error(e.message||"Failed to sign up")}return{...await r.json(),verificationEmailSent:!0}}catch(e){if(console.error("Signup error:",e),"auth/email-already-in-use"===e.code)throw Error("This email is already registered. Please log in or use a different email.");if(t&&t.user&&"This email is already registered. Please log in or use a different email."!==e.message)try{await t.user.delete(),console.log("Firebase user cleaned up after signup error")}catch(e){console.error("Failed to delete Firebase user during cleanup:",e)}throw e}},g=async(e,t)=>{try{let r=await (0,c.x9)(s,e,t);if(!r.user.emailVerified)throw await (0,c.gA)(r.user),Error("Please verify your email address. A new verification email has been sent.");let i=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,firebaseUid:r.user.uid})});if(!i.ok){let e=await i.json();throw Error(e.message||"Failed to login")}let o=await i.json();return a({...o.user,emailVerified:r.user.emailVerified}),o}catch(e){throw console.error("Login error:",e),e}},w=async()=>{try{let e=(await (0,c.df)(s,i)).user,t=await e.getIdToken(),r=d.env.NEXT_PUBLIC_BACKEND_URL||"https://backend-0dlk.onrender.com",a=await fetch("".concat(r,"/auth/google"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idToken:t}),credentials:"include"});if(!a.ok){let e=await a.json();throw Error(e.message||"Failed to sign in with Google")}return await m(),!0}catch(e){throw console.error("Google sign-in error:",e),e}},f=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),await s.signOut(),a(null)}catch(e){throw console.error("Logout error:",e),e}},y=async()=>{if(!s.currentUser)throw Error("No user is currently signed in");await (0,c.gA)(s.currentUser)};return(0,o.jsx)(u.Provider,{value:{user:r,loading:l,signUp:p,login:g,signInWithGoogle:w,logout:f,resendVerificationEmail:y},children:!l&&t})}let m=()=>(0,n.useContext)(u)}},e=>{var t=t=>e(e.s=t);e.O(0,[811,81,874,853,614,441,684,358],()=>t(683)),_N_E=e.O()}]);